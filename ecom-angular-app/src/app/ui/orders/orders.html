<div class="container py-5">
  <div class="row mb-4">
    <div class="col-12">
      <h1 class="fw-bold">Orders History</h1>
      <p class="text-muted">Summary of all transactions</p>
    </div>
  </div>

  @if (loading()) {
  <div class="text-center py-5">
    <div class="spinner-border text-primary" role="status"></div>
  </div>
  }

  @if (!loading() && orders().length > 0) {
  <div class="card shadow-sm border-0">
    <div class="table-responsive">
      <table class="table table-hover align-middle mb-0">
        <thead class="table-dark">
          <tr>
            <th>Order ID</th>
            <th>Date</th>
            <th>Status</th>
            <th class="text-center">Items Count</th>
            <th class="text-center">Action</th>
          </tr>
        </thead>
        <tbody>
          @for (order of orders(); track order.id) {
          <tr>
            <td class="small fw-bold text-primary">#{{ order.id.substring(0,8) }}...</td>
            <td>{{ order.date | date:'mediumDate' }}</td>
            <td>
              <span class="badge" [ngClass]="{
                    'bg-warning text-dark': order.state === 'PENDING',
                    'bg-success': order.state === 'EXECUTED',
                    'bg-danger': order.state === 'CANCELED'
                  }">{{ order.state }}</span>
            </td>
            <td class="text-center">{{ order.productItems.length }}</td>
            <td class="text-center">
              <a class="btn btn-sm btn-outline-primary px-3" [routerLink]="['/orders', order.id]">
                <i class="bi bi-info-circle me-1"></i>View Details
              </a>
            </td>
          </tr>
          }
        </tbody>
      </table>
    </div>
  </div>
  }
</div>
